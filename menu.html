<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>水泳メニュー作成</title>
<script>
var str="";
var dis = 0;
var time = 0;
function event01() {
var fm = document.forms["fm"];
str = fm.txt1.value;
var s1 = fm.s1.value;
var a = [], b = [], c = [], d = [],e = [];
if (str==""){
date = fm.date.value;
str = date+"\n"+"\n";
}
str = str+s1+"\n";
for (var i=1;i<=10; i++)
{
 	a[i] = Number(fm["t" + i + "a"].value);
        b[i] = Number(fm["t" + i + "b"].value);
        c[i] = Number(fm["t" + i + "c"].value);
        d[i] = fm["t" + i + "d"].value;
	e[i] = fm["t" + i + "e"].value;
	
	
	
	if (a[i] != 0&&c[i]!=0){
        str += a[i] + "×" + b[i] + "×" + c[i] + "  " + d[i] + "  " + e[i] +"\n";
	var t = d[i].split("'");
	time += t[0]*b[i]*c[i]*60+(t[1]*b[i]*c[i]);
	}
	if (a[i] != 0&&c[i]==0){
        str += a[i] + "×" + b[i] + "   " + "  " + d[i] + "  " + e[i] +"\n";
	var t = d[i].split("'");
	time += t[0]*b[i]*60+(t[1]*b[i]);
	c[i]=1;
	}
	if(a[i] == 0&&c[i]==0){
	a[i] = 0;
        b[i] = 0;
        c[i] = 0;
        d[i] = 0;
	e[i] = 0;
	}
	
	
	dis += a[i] * b[i] * c[i] ;
console.log(time) 
}





fm.txt1.value=str;

for (var i=1;i<=10; i++)
{
 	fm["t" + i + "a"].value="";
        fm["t" + i + "b"].value="";
        fm["t" + i + "c"].value="";
        fm["t" + i + "d"].value="";
	fm["t" + i + "e"].value="";

}

}



function event02() {
var fm = document.forms["fm"];
str="";
dis = 0;
time = 0;
fm.txt1.value=str;
}



function event03() {
var fm = document.forms["fm"];
var n = Number(time);
var x =Math.floor(n/60);
var y =n%60;
 
str = str+"\n" +"total "+ dis +"                       "+x+"分"+y+"秒" ;
fm.txt1.value=str;
}

function downloadText( name, content )
{
var blob = new Blob([ content ], { "type" : "text/plain" });
var a = document.createElement("a");
a.href = URL.createObjectURL(blob);
a.target = '_blank';
a.download = name;
a.click();
}

</script>
</head>
<body>
<form name="fm">
<h5>水泳メニュー作成</h5>
<table border="1" cellspacing="1" cellpadding="1">

<tr>

<td>
<input type="text" name="date"> 
</td>
<td>
距離
</td>

<td>
本数
</td>

<td>
セット
</td>

<td>
サークル
</td>

<td>
内容
</td>

<td>

</td>

</tr>

<hr>

<tr>
<td>
<select name="s1">
<option value=W-up>W-up</option>
<option value=SWIM>SWIM</option>
<option value=KICK>KICK</option>
<option value=PULL>PULL</option>
<option value=DRILL>DRILL</option>
<option value=MAIN>MAIN</option>
</select>
</td>

<td>
<input type="text" name="t1a"> 
</td>

<td>
<input type="text" name="t1b"> 
</td>

<td>
<input type="text" name="t1c"> 
</td>

<td>
<input type="text" name="t1d"> 
</td>

<td>
<input type="text" name="t1e"> 
</td>


</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t2a"> 
</td>

<td>
<input type="text" name="t2b"> 
</td>

<td>
<input type="text" name="t2c"> 
</td>

<td>
<input type="text" name="t2d"> 
</td>

<td>
<input type="text" name="t2e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t3a"> 
</td>

<td>
<input type="text" name="t3b"> 
</td>

<td>
<input type="text" name="t3c"> 
</td>

<td>
<input type="text" name="t3d"> 
</td>

<td>
<input type="text" name="t3e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t4a"> 
</td>

<td>
<input type="text" name="t4b"> 
</td>

<td>
<input type="text" name="t4c"> 
</td>

<td>
<input type="text" name="t4d"> 
</td>

<td>
<input type="text" name="t4e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t5a"> 
</td>

<td>
<input type="text" name="t5b"> 
</td>

<td>
<input type="text" name="t5c"> 
</td>

<td>
<input type="text" name="t5d"> 
</td>

<td>
<input type="text" name="t5e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t6a"> 
</td>

<td>
<input type="text" name="t6b"> 
</td>

<td>
<input type="text" name="t6c"> 
</td>

<td>
<input type="text" name="t6d"> 
</td>

<td>
<input type="text" name="t6e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t7a"> 
</td>

<td>
<input type="text" name="t7b"> 
</td>

<td>
<input type="text" name="t7c"> 
</td>

<td>
<input type="text" name="t7d"> 
</td>

<td>
<input type="text" name="t7e"> 
</td>

</tr>


<tr>
<td>

</td>

<td>
<input type="text" name="t8a"> 
</td>

<td>
<input type="text" name="t8b"> 
</td>

<td>
<input type="text" name="t8c"> 
</td>

<td>
<input type="text" name="t8d"> 
</td>

<td>
<input type="text" name="t8e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t9a"> 
</td>

<td>
<input type="text" name="t9b"> 
</td>

<td>
<input type="text" name="t9c"> 
</td>

<td>
<input type="text" name="t9d"> 
</td>

<td>
<input type="text" name="t9e"> 
</td>

</tr>

<tr>
<td>

</td>

<td>
<input type="text" name="t10a"> 
</td>

<td>
<input type="text" name="t10b"> 
</td>

<td>
<input type="text" name="t10c"> 
</td>

<td>
<input type="text" name="t10d"> 
</td>

<td>
<input type="text" name="t10e">
</td>

</tr>
                                                                                                                            
 


</table>

<input type="button" value="実行" name="b1" onclick="event01()"> 
<input type="button" value="終了" name="b3" onclick="event03()"> 

<h4>結果表示エリア<h4>
<input type="button" value="クリア" name="b2" onclick="event02()"> 
<input type="button" value="ダウンロード" onclick="downloadText('result.txt',txt1.value);"><hr>
<textarea cols="80" rows="50" name="txt1">
</textarea>




</form>
</body>
</html>